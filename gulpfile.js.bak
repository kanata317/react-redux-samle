var gulp = require('gulp'),
  browserify = require('browserify'),
  babelify = require('babelify'),
  source = require('vinyl-source-stream'),
  browserSync = require('browser-sync');
;


gulp.task('browserify', function() {
  browserify('./src/index.js', {
    debug: true
  })
    .transform(babelify)
    .bundle()
    .on('error', function(err) {
      console.log('Error: ' + err.message);
    })
    .pipe(source('app.js'))
    .pipe(gulp.dest('./dist'))
});

gulp.task('browserReload', function() {
  browserSync.reload();
})

gulp.task('browserSync', function() {
  browserSync({
    server: {
      baseDir: 'dist'
    }
  });
  gulp.watch('./src/*.js', ['browserify', 'browserReload']);
});



gulp.task('default', ['browserify', 'browserSync']);
